<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IFE</title>
</head>
<body>
<select id="year-select">
    <option value="2000">2000</option>
    <option value="2001">2001</option>
    <option value="2002">2002</option>
    <option value="2018">2018</option>
    <option value="2030">2030</option>
    <option value="2031">2031</option>
    <option value="2032">2032</option>
</select>

<select id="month-select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
</select>

<select id="day-select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="27">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
</select>

<select id="hour-select">
    <option value="0">00</option>
    <option value="1">01</option>
    <option value="2">02</option>
    <option value="3">03</option>
    <option value="4">04</option>
    <option value="5">05</option>
    <option value="6">06</option>
    <option value="7">07</option>
    <option value="8">08</option>
    <option value="9">09</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
</select>

<select id="minite-select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="27">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
    <option value="32">32</option>
    <option value="33">33</option>
    <option value="34">34</option>
    <option value="35">35</option>
    <option value="36">36</option>
    <option value="37">37</option>
    <option value="38">38</option>
    <option value="39">39</option>
    <option value="40">40</option>
    <option value="41">41</option>
    <option value="42">42</option>
    <option value="43">43</option>
    <option value="44">44</option>
    <option value="45">45</option>
    <option value="46">46</option>
    <option value="47">47</option>
    <option value="48">48</option>
    <option value="49">49</option>
    <option value="50">50</option>
    <option value="51">51</option>
    <option value="52">52</option>
    <option value="53">53</option>
    <option value="54">54</option>
    <option value="55">55</option>
    <option value="56">56</option>
    <option value="57">57</option>
    <option value="58">58</option>
    <option value="59">59</option>
</select>

<select id="second-select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="27">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
    <option value="32">32</option>
    <option value="33">33</option>
    <option value="34">34</option>
    <option value="35">35</option>
    <option value="36">36</option>
    <option value="37">37</option>
    <option value="38">38</option>
    <option value="39">39</option>
    <option value="40">40</option>
    <option value="41">41</option>
    <option value="42">42</option>
    <option value="43">43</option>
    <option value="44">44</option>
    <option value="45">45</option>
    <option value="46">46</option>
    <option value="47">47</option>
    <option value="48">48</option>
    <option value="49">49</option>
    <option value="50">50</option>
    <option value="51">51</option>
    <option value="52">52</option>
    <option value="53">53</option>
    <option value="54">54</option>
    <option value="55">55</option>
    <option value="56">56</option>
    <option value="57">57</option>
    <option value="58">58</option>
    <option value="59">59</option>
</select>

<p id="result-wrapper">现在距离 2001年1月1月星期X HH:MM:SS 还有 X 天 X 小时 X 分 X 秒</p>

<div>
    <button><a href="test2.html">上一个练习</a> </button>
    <button><a href="test1.html">下一个练习</a> </button>
</div>
<div id='create'></div>
<script>

    //用于创建下拉选项
    function createOption(start,end,contaier){
        contaier.innerHTML = '';
        for(var i=start;i<=end;i++)
        {
            var opt = document.createElement('option');
            opt.value=i;
            opt.innerText = i;
            contaier.appendChild(opt);
        }

    }
    var date = new Date('2000 1 1');

    function displayTime(){
        var year = date.getFullYear();
        var month = date.getMonth()+1;
        var d = date.getDate();
        var day = getDay();
        var h = getHour();
        var m = getMinute();
        var s = getSecond();
        return year+'年'+month+'月'+d+'日'+day+' '+h+':'+m+':'+s+' ';
    }
    function display(){
        var connect = ' 还有 ';
        var distance;
        var now = new Date();
        if(date<now) {
            connect = ' 已经过去 ';
            distance = calcTimeDis(date,now)
        }else{
            distance = calcTimeDis(now,date)
        }
        document.querySelector('#result-wrapper').innerText = displayTime()+connect+distance
    }
    function calcTimeDis(start,end){
        var seconds =parseInt((end.getTime() - start.getTime()) / 1000);
        var day = parseInt(seconds / (24 * 3600));
        seconds = seconds - day * 24 * 3600;
        var hour = parseInt(seconds / 3600);
        seconds = seconds - hour * 3600;
        var minute = parseInt(seconds / 60);
        seconds = seconds % 60;
        return day+'日'+hour+'时'+minute+'分'+seconds+'秒'
    }
    function getHour(){
        var h = date.getHours();
        return h<10?'0'+h:h
    }
    function getMinute(){
        var h = date.getMinutes();
        return h<10?'0'+h:h
    }
    function getSecond(){
        var h = date.getSeconds();
        return h<10?'0'+h:h
    }
    function getDay(){
        var day = date.getDay();
        var dict ={1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六",0:"星期天"};
        return dict[day]

    }
    function getDaysNumInFeb(){
        var bool = date.getFullYear()%400==0 || (date.getFullYear()%100!=0 && date.getFullYear()%4==0)
        return bool?29:28
    }
    document.body.addEventListener('change',function(e){
        var t = e.target;
        var value = Number(t.querySelector('option:checked').value);
        var type = t.id.split('-')[0];
    switch(type){
        case 'year':
            date.setFullYear(value);
            if(date.getMonth()==1){
                var oriDate = date.getDate();
                createOption(1,getDaysNumInFeb(),document.querySelector('#day-select'));
                document.querySelector('#day-select').selectedIndex=oriDate-1
            }
            break;
        case 'month':

            date.setMonth(value-1);
            var oriDate = date.getDate();
            var datSelect = document.querySelector('#day-select');
            if([1,3,5,7,8,10,12].indexOf(value)!=-1){
                createOption(1,31,datSelect);
                datSelect.selectedIndex=oriDate-1
            }else if(value == 2){
                createOption(1,getDaysNumInFeb(),datSelect);
                datSelect.selectedIndex=oriDate-1
            }else{
                createOption(1,30,datSelect);
                datSelect.selectedIndex=oriDate-1
            }
            break;
        case 'day':
            date.setDate(value);
            break;
        case 'hour':
            date.setHours(value);
            break;
        case 'minite':
            date.setMinutes(value);
            break;
        case 'second':
            date.setSeconds(value);
    }
    display();
    });

    display();
    setInterval(display,1000)
</script>
</body>
</html>